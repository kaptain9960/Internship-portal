{% extends 'base.html' %}

{% block title %} | Forgot Password {% endblock %}
{% block content %}
<div class="auth-content">
  <div class="auth-container">
    <span>
      {% include 'alerts.html' %}
    </span>
    <div class="auth-card">
      <div class="auth-header">
        <h2><span class="icon">üîë</span> Forgot Password</h2>
        <p style="font-size: 14px; color: #666; margin-top: 10px;">
          Enter your email address and we'll send you a link to reset your password.
        </p>
      </div>
      
      {% if reset_link %}
        <!-- Display the reset link -->
        <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
          <h3 style="color: #155724; margin-top: 0;">‚úÖ Reset Link Generated!</h3>
          <p style="color: #155724; margin-bottom: 15px;">
            Password reset link for <strong>{{ email }}</strong>:
          </p>
          
          <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #c3e6cb; margin-bottom: 15px; word-break: break-all;">
            <a href="{{ reset_link }}" style="color: #1e3a64; text-decoration: none; font-size: 14px;">
              {{ reset_link }}
            </a>
          </div>
          
          <a href="{{ reset_link }}" class="btn" style="text-decoration: none; display: inline-block;">
            Click Here to Reset Password
          </a>
        </div>
        
        <div class="form-group" style="text-align: center;">
          <a href="{% url 'reset_password_via_email' %}" style="color: #1e3a64;">
            Reset Another Account
          </a>
        </div>
      {% else %}
        <!-- Display the form -->
        <form method="post" action="">
          {% csrf_token %}
          
          <div class="form-group">
            <label for="email" class="form-label">Email Address</label>
            {{ form.email }}
            {% if form.email.errors %}
              {% for error in form.email.errors %}
                <p style="color: red; font-size: 13px; margin-top: 5px;">{{ error }}</p>
              {% endfor %}
            {% endif %}
          </div>
          
          <button type="submit" class="btn">Generate Reset Link</button>
        </form>
      {% endif %}
      
      <div class="form-group" style="text-align: center; margin-top: 20px;">
        <a href="{% url 'login' %}" style="color: #1e3a64;">
          <span style="margin-right: 5px;">‚Üê</span> Back to Login
        </a>
      </div>
      
      <div class="form-group" style="text-align: center; margin-top: 10px;">
        <span style="color: #666;">Don't have an account?</span>
        <a href="{% url 'register' %}" style="color: #1e3a64; margin-left: 5px;">Register</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}