{% extends 'base.html' %}

{% block title %} | Reset Password {% endblock %}
{% block content %}
<div class="auth-content">
  <div class="auth-container">
    <span>
      {% include 'alerts.html' %}
    </span>
    <div class="auth-card">
      {% if validlink %}
        <div class="auth-header">
          <h2><span class="icon">üîê</span> Create New Password</h2>
          <p style="font-size: 14px; color: #666; margin-top: 10px;">
            Please enter your new password below.
          </p>
        </div>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; font-size: 13px;">
          <strong>Password Requirements:</strong>
          <ul style="margin: 10px 0 0 20px; padding: 0;">
            <li>At least 8 characters long</li>
            <li>Must contain letters and numbers</li>
            <li>Cannot be too common</li>
            <li>Cannot be entirely numeric</li>
          </ul>
        </div>
        
        <form method="post" action="">
          {% csrf_token %}
          
          <div class="form-group">
            <label for="{{ form.new_password1.id_for_label }}" class="form-label">New Password</label>
            {{ form.new_password1 }}
            {% if form.new_password1.errors %}
              {% for error in form.new_password1.errors %}
                <p style="color: red; font-size: 13px; margin-top: 5px;">{{ error }}</p>
              {% endfor %}
            {% endif %}
          </div>
          
          <div class="form-group">
            <label for="{{ form.new_password2.id_for_label }}" class="form-label">Confirm Password</label>
            {{ form.new_password2 }}
            {% if form.new_password2.errors %}
              {% for error in form.new_password2.errors %}
                <p style="color: red; font-size: 13px; margin-top: 5px;">{{ error }}</p>
              {% endfor %}
            {% endif %}
          </div>
          
          <button type="submit" class="btn">Reset Password</button>
        </form>
      {% else %}
        <div class="auth-header">
          <h2><span class="icon">‚ö†Ô∏è</span> Invalid Reset Link</h2>
          <p style="font-size: 14px; color: #dc3545; margin-top: 10px;">
            The password reset link is invalid or has expired.
          </p>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
          <p style="color: #666; margin-bottom: 15px;">
            Please request a new password reset link.
          </p>
          <a href="{% url 'reset_password_via_email' %}" class="btn" style="display: inline-block; text-decoration: none;">
            Request New Link
          </a>
        </div>
      {% endif %}
      
      <div class="form-group" style="text-align: center; margin-top: 20px;">
        <a href="{% url 'login' %}" style="color: #1e3a64;">
          <span style="margin-right: 5px;">‚Üê</span> Back to Login
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}